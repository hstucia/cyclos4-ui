<VirtualHost *:8080>
  ServerName www.example.com
  DocumentRoot "/app"

  <Directory "/app">
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
    # for spa routing
    <IfModule mod_rewrite.c>
      RewriteEngine On
      RewriteBase /
      RewriteRule ^index\.html$ - [L]
      RewriteCond %{REQUEST_FILENAME} !-f
      RewriteCond %{REQUEST_FILENAME} !-d
      RewriteRule . /index.html [L]
    </IfModule>
  </Directory>
  <IfModule mod_proxy.c>
    SSLProxyEngine On
    # ProxyPass "/api" "http://localhost:8080/cyclos/api" keepalive=On connectiontimeout=10 timeout=60
    # ProxyPass "/api" "https://demo.cyclos.org/api" keepalive=On connectiontimeout=10 timeout=60
    ProxyPass "/api" "https://mlc.sol-reseau.org/elsass/lacigogne/api" keepalive=On connectiontimeout=10 timeout=60
    # ProxyPassReverse "/api" "http://localhost:8080/cyclos/api"
    # ProxyPassReverse "/api" "https://demo.cyclos.org/api"
    ProxyPassReverse "/api" "https://mlc.sol-reseau.org/elsass/lacigogne/api"
    ProxyPassReverseCookiePath "/cyclos/" "/"
  </IfModule>
</VirtualHost>